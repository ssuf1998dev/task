version: "3"

tasks:
  js:
    vars:
      A: "a"

    env:
      B: "b"
      C: "c"

    cmds:
      - cmd: print(1 + 2);
        interp: "javascript"

      - cmd: |
          var hello = 'world';
          print(hello);
        interp: "javascript"

      - cmd: |
          var A = '{{.A}}';
          print(A);
        interp: "javascript"

      - cmd: print(process.env.B + process.env.C);
        interp: "js"

  civet:
    cmds:
      - cmd: "1 + 2 |> print"
        interp: "civet"

      - cmd: "[1,2,3] |> .map & * 2 |> print"
        interp: "civet"

  var-js:
    vars:
      SUM:
        sh: print(1 + 2)
        interp: "javascript"

    cmd: echo {{.SUM}}

  var-civet:
    vars:
      SUM:
        sh: "[1,2,3].reduce (+) |> print"
        interp: "civet"

    cmd: echo {{.SUM}}

  shell:
    cmds:
      - "task.qjs ./script.js 0"
      - "task.civet ./script.civet 1 2 3"
